package com.example.calculate

import android.os.Bundle
import android.widget.Button
import android.widget.EditText
import android.widget.TextView
import androidx.activity.enableEdgeToEdge
import androidx.appcompat.app.AppCompatActivity
import androidx.core.view.ViewCompat
import androidx.core.view.WindowInsetsCompat
import com.example.calculator.R
import java.lang.NumberFormatException

class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main2)

        val num2 = findViewById<EditText>(R.id.editTextText)

        val Znak : TextView = findViewById(R.id.textView)
        val Ans : TextView = findViewById(R.id.textView2)

        val btn0 : Button = findViewById(R.id.button9)
        val btn1 : Button = findViewById(R.id.button12)
        val btn2 : Button = findViewById(R.id.button13)
        val btn3 : Button = findViewById(R.id.button14)
        val btn4 : Button = findViewById(R.id.button4)
        val btn5 : Button = findViewById(R.id.button5)
        val btn6 : Button = findViewById(R.id.button6)
        val btn7 : Button = findViewById(R.id.button20)
        val btn8 : Button = findViewById(R.id.button21)
        val btn9 : Button = findViewById(R.id.button18)

        val btnPlus : Button = findViewById(R.id.button19)
        val btnMinus : Button = findViewById(R.id.button7)
        val btnDel : Button = findViewById(R.id.button3)
        val btnSqr : Button = findViewById(R.id.button2)
        val btnPoint : Button = findViewById(R.id.button8)
        val btnAC : Button = findViewById(R.id.button)
        val btnR : Button = findViewById(R.id.button15)

        btn0.setOnClickListener{num2.append("0")}
        btn1.setOnClickListener{num2.append("1")}
        btn2.setOnClickListener{num2.append("2")}
        btn3.setOnClickListener{num2.append("3")}
        btn4.setOnClickListener{num2.append("4")}
        btn5.setOnClickListener{num2.append("5")}
        btn6.setOnClickListener{num2.append("6")}
        btn7.setOnClickListener{num2.append("7")}
        btn8.setOnClickListener{num2.append("8")}
        btn9.setOnClickListener{num2.append("9")}

        var dot:String="."
        btnPoint.setOnClickListener{
            if(num2.text.toString() != ""){
                num2.append(dot)
                dot = ""
            }
        }
        btnPlus.setOnClickListener{
            Znak.setText("+")
            if(Ans.text == null || Ans.text.toString().isEmpty())
            {
                Ans.setText(num2.text)
            }
            else
            {
                var n1 : Float = num2.text.toString().toFloat()
                var n2 : Float = Ans.text.toString().toFloat()
                var oper: String = Znak.text.toString()
                Ans.text = when (oper) {
                    "+" -> {
                        (n2 + n1).toString()
                    }
                    else -> ""
                }
            }
            num2.setText("")
            dot = "."
        }
        btnMinus.setOnClickListener{
            Znak.setText("-")
            if(Ans.text == null || Ans.text.toString().isEmpty())
            {
                Ans.setText(num2.text)
            }
            else
            {
                var n1 : Float = num2.text.toString().toFloat()
                var n2 : Float = Ans.text.toString().toFloat()
                var oper: String = Znak.text.toString()
                Ans.text = when (oper) {
                    "-" -> {
                        (n2 - n1).toString()
                    }
                    else -> ""
                }
            }
            num2.setText("")
            dot = "."
        }
        btnSqr.setOnClickListener{
            Znak.setText("*")
            if(Ans.text == null || Ans.text.toString().isEmpty())
            {
                Ans.setText(num2.text)
            }
            else
            {
                var n1 : Float = num2.text.toString().toFloat()
                var n2 : Float = Ans.text.toString().toFloat()
                var oper: String = Znak.text.toString()
                Ans.text = when (oper) {
                    "*" -> {
                        (n2 * n1).toString()
                    }
                    else -> ""
                }
            }
            num2.setText("")
            dot = "."
        }
        btnDel.setOnClickListener{
            Znak.setText("/")
            if(Ans.text == null || Ans.text.toString().isEmpty())
            {
                Ans.setText(num2.text)
            }
            else
            {
                var n1 : Float = num2.text.toString().toFloat()
                var n2 : Float = Ans.text.toString().toFloat()
                var oper: String = Znak.text.toString()
                Ans.text = when (oper) {
                    "/" -> {
                        (n2 / n1).toString()
                    }
                    else -> ""
                }
            }
            num2.setText("")
            dot = "."
        }
        btnAC.setOnClickListener{
            Znak.setText("")
            Ans.setText("")
            num2.setText("")
            dot = "."
        }
        btnR.setOnClickListener{
            var n1 : Float = num2.text.toString().toFloat()
            var n2 : Float = Ans.text.toString().toFloat()
            var oper: String = Znak.text.toString()
            if(num2.text.toString() == "0" && Znak.text == "/")
            {
                Ans.setText("Error")
            }
            else
            {
                Ans.text = when (oper) {
                    "+" -> {
                        (n2+n1).toString()
                    }

                    "/" -> {
                        (n2 / n1).toString()
                    }

                    "*" -> {
                        (n2 * n1).toString()
                    }

                    "-" -> {
                        (n2 - n1).toString()
                    }

                    else -> ""
                }
            }

            //Ans.setText(A.toString())
            num2.setText("")
            Znak.setText("")
        }



    }
}


FATAL EXCEPTION: main
                                                                                                    Process: com.example.calculator, PID: 4535
                                                                                                    java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.calculator/com.example.calculator.MainActivity}: java.lang.ClassNotFoundException: Didn't find class "com.example.calculator.MainActivity" on path: DexPathList[[zip file "/data/app/~~suEpk76P15ZWEGFFd2c2nA==/com.example.calculator-cQJvAswTAenwNcK7x8BE5Q==/base.apk"],nativeLibraryDirectories=[/data/app/~~suEpk76P15ZWEGFFd2c2nA==/com.example.calculator-cQJvAswTAenwNcK7x8BE5Q==/lib/x86_64, /system/lib64, /system_ext/lib64]]
                                                                                                    	at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3954)
                                                                                                    	at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4235)
                                                                                                    	at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:112)
                                                                                                    	at android.app.servertransaction.TransactionExecutor.executeNonLifecycleItem(TransactionExecutor.java:174)
                                                                                                    	at android.app.servertransaction.TransactionExecutor.executeTransactionItems(TransactionExecutor.java:109)
                                                                                                    	at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:81)
                                                                                                    	at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2636)
                                                                                                    	at android.os.Handler.dispatchMessage(Handler.java:107)
                                                                                                    	at android.os.Looper.loopOnce(Looper.java:232)
                                                                                                    	at android.os.Looper.loop(Looper.java:317)
                                                                                                    	at android.app.ActivityThread.main(ActivityThread.java:8705)
                                                                                                    	at java.lang.reflect.Method.invoke(Native Method)
                                                                                                    	at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:580)
                                                                                                    	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:886)
                                                                                                    Caused by: java.lang.ClassNotFoundException: Didn't find class "com.example.calculator.MainActivity" on path: DexPathList[[zip file "/data/app/~~suEpk76P15ZWEGFFd2c2nA==/com.example.calculator-cQJvAswTAenwNcK7x8BE5Q==/base.apk"],nativeLibraryDirectories=[/data/app/~~suEpk76P15ZWEGFFd2c2nA==/com.example.calculator-cQJvAswTAenwNcK7x8BE5Q==/lib/x86_64, /system/lib64, /system_ext/lib64]]
                                                                                                    	at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:259)
                                                                                                    	at java.lang.ClassLoader.loadClass(ClassLoader.java:637)
                                                                                                    	at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
                                                                                                    	at android.app.AppComponentFactory.instantiateActivity(AppComponentFactory.java:95)
                                                                                                    	at androidx.core.app.CoreComponentFactory.instantiateActivity(CoreComponentFactory.java:45)
                                                                                                    	at android.app.Instrumentation.newActivity(Instrumentation.java:1448)
                                                                                                    	at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3941)
                                                                                                    	at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4235) 
                                                                                                    	at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:112) 
                                                                                                    	at android.app.servertransaction.TransactionExecutor.executeNonLifecycleItem(TransactionExecutor.java:174) 
                                                                                                    	at android.app.servertransaction.TransactionExecutor.executeTransactionItems(TransactionExecutor.java:109) 
                                                                                                    	at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:81) 
                                                                                                    	at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2636) 
                                                                                                    	at android.os.Handler.dispatchMessage(Handler.java:107) 
                                                                                                    	at android.os.Looper.loopOnce(Looper.java:232) 
                                                                                                    	at android.os.Looper.loop(Looper.java:317) 
                                                                                                    	at android.app.ActivityThread.main(ActivityThread.java:8705) 
                                                                                                    	at java.lang.reflect.Method.invoke(Native Method) 
                                                                                                    	at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:580) 
                                                                                                    	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:886) 
